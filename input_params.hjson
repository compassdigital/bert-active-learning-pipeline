{
   core:
   {
      db_type: redshift
      sql_code:
         '''
            select pos_source, 
            cia.cleansed_tier_1, 
            cia.cleansed_tier_2, 
            cia.cleansed_tier_3, 
            cia.cleansed_tier_4, 
            sku, 
            pos.item_name, 
            sum(sales_amt_gross) as sales_amt_gross, 
            sum(item_qty) as item_qty, 
            count(distinct org_unit_key) as location_count 
            from  SOURCE.cg_dw_cdl_us_source_can_pos_order_detail pos 
            join datascience_item_dim.consolidated_item_attributes cia 
            on  pos.item_name = cia.item_name 
            where close_date >= '2020-01-01' and 
            ((cia.cleansed_tier_2 = 'Breakfast') or cia.cleansed_tier_2 = 'Entree') and 
            sales_amt_gross > 0  and sales_amt_gross < 1000 and 
            pos_source not in ('OCS','AVEC') 
            group by  pos_source, 
            cia.cleansed_tier_1, 
            cia.cleansed_tier_2, 
            cia.cleansed_tier_3, 
            cia.cleansed_tier_4, 
            pos.item_name,  
            sku
         '''
      itemname_col: lineitem_name
      spend_col: sales_amt_gross
      ner_model_name: protein_attribution_ner
      tag_lookup:
      {
         protein: P
         not_protein: NP
      }
      ner_clust_cols:
      [
         lineitem_name
      ]
      cls_model_name: protein_attribution
      cls_input_cols:
      [
         tier_1
         tier_2
         tier_3
         tier_4
         lineitem_name
      ]
      model_architecture: bert-base-uncased
      use_pretrained_model: true
      model_path: epoch_95
   }
   nb_one:
   {
      sample_n: 60
   }
   nb_two:
   {
      batch_size: 4
      learning_rate: 0.0001
   }
   nb_three:
   {
      sample_n: 75
      test_samples: 25
      n_strata: 5
   }
   nb_four:
   {
      patience: 1
      learning_rate: 0.0001
      batch_size: 32
      n_increments: 1
   }
   model_performance:
   {
      Turkey:
      {
         0: 0.9973427812223206
         1: 1.0
         2: 0.9972093023255814
         3: 0.9972093023255814
         4: 0.9972093023255814
         5: 0.9972093023255814
         6: 0.9972093023255814
      }
      Chicken:
      {
         0: 0.995897759545598
         1: 0.994778785380599
         2: 0.9907502569373073
         3: 0.9907502569373073
         4: 0.9907502569373073
         5: 0.9907502569373073
         6: 0.9907502569373073
      }
      Cheese:
      {
         0: 0.9691780821917807
         1: 0.9738058551617874
         2: 0.9679595278246207
         3: 0.9679595278246207
         4: 0.9679595278246207
         5: 0.9679595278246207
         6: 0.9679595278246207
      }
      Beef:
      {
         0: 0.9728571428571429
         1: 0.9802673456397198
         2: 0.9614197530864197
         3: 0.9614197530864197
         4: 0.9614197530864197
         5: 0.9614197530864197
         6: 0.9614197530864197
      }
      AO:
      {
         0: 0.9600489196901755
         1: 0.9676156583629894
         2: 0.9505985963946608
         3: 0.9505985963946608
         4: 0.9505985963946608
         5: 0.9505985963946608
         6: 0.9505985963946608
      }
      Veggie:
      {
         0: 0.951345163136806
         1: 0.95995995995996
         2: 0.9458288190682557
         3: 0.9458288190682557
         4: 0.9458288190682557
         5: 0.9458288190682557
         6: 0.9458288190682557
      }
      Ham:
      {
         0: 0.9911816578483246
         1: 0.9949916527545909
         2: 0.9983844911147012
         3: 0.9983844911147012
         4: 0.9983844911147012
         5: 0.9983844911147012
         6: 0.9983844911147012
      }
      Fish:
      {
         0: 0.9781477627471383
         1: 0.9834146341463414
         2: 0.9787234042553192
         3: 0.9787234042553192
         4: 0.9787234042553192
         5: 0.9787234042553192
         6: 0.9787234042553192
      }
      Seafood:
      {
         0: 0.9573033707865168
         1: 0.9693251533742331
         2: 0.949748743718593
         3: 0.949748743718593
         4: 0.949748743718593
         5: 0.949748743718593
         6: 0.949748743718593
      }
      Pepperoni:
      {
         0: 1.0
         1: 0.975609756097561
         2: 0.975609756097561
         3: 0.975609756097561
         4: 0.975609756097561
         5: 0.975609756097561
         6: 0.975609756097561
      }
      Pork:
      {
         0: 0.9653465346534654
         1: 0.9712918660287081
         2: 0.9515669515669516
         3: 0.9515669515669516
         4: 0.9515669515669516
         5: 0.9515669515669516
         6: 0.9515669515669516
      }
      Supplies:
      {
         0: 0.8446866485013624
         1: 0.8695652173913043
         2: 0.781021897810219
         3: 0.781021897810219
         4: 0.781021897810219
         5: 0.781021897810219
         6: 0.781021897810219
      }
      Sausage:
      {
         0: 0.9794520547945206
         1: 0.9806451612903225
         2: 0.9733333333333333
         3: 0.9733333333333333
         4: 0.9733333333333333
         5: 0.9733333333333333
         6: 0.9733333333333333
      }
      Meatball:
      {
         0: 0.9642857142857143
         1: 0.9913043478260869
         2: 0.98989898989899
         3: 0.98989898989899
         4: 0.98989898989899
         5: 0.98989898989899
         6: 0.98989898989899
      }
      Egg:
      {
         0: 0.98989898989899
         1: 0.9549549549549549
         2: 0.9130434782608695
         3: 0.9130434782608695
         4: 0.9130434782608695
         5: 0.9130434782608695
         6: 0.9130434782608695
      }
      Bacon:
      {
         0: 0.9347826086956522
         1: 0.959349593495935
         2: 0.9215686274509803
         3: 0.9215686274509803
         4: 0.9215686274509803
         5: 0.9215686274509803
         6: 0.9215686274509803
      }
      Lamb:
      {
         0: 1.0
         1: 1.0
         2: 1.0
         3: 1.0
         4: 1.0
         5: 1.0
         6: 1.0
      }
      n_samples:
      {
         0: 24564
         1: 49128
         2: 9391
         3: 9391
         4: 9391
         5: 9391
         6: 9391
      }
   }
}